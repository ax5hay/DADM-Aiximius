FROM python:3.11-slim
WORKDIR /app
COPY training/ /app/training/
COPY federated/ /app/federated/
RUN pip install --no-cache-dir torch numpy flask cryptography pyyaml \
    && pip install --no-cache-dir -r /app/federated/requirements.txt 2>/dev/null || true
ENV PYTHONPATH=/app
CMD ["python", "/app/federated/server.py", "--host", "0.0.0.0", "--port", "5000"]
